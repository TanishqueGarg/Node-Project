<!DOCTYPE html>
<html lang="en">

<head>
    <title>Document</title>
    <!--JQuery Integration-->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <!--JQuery Integrated-->
    <!--Bootstrap Integration-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <!--Bootstrap Integrated-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.3/angular.min.js"></script>
    <script>
        var module = angular.module("MyModule", []);
        var controller = module.controller("MyController", function ($scope, $http) {
            // $scope.fillAllCities=function()
            // {
            //     $scope.jsonAryCities;
            //     alert("Helllllo");
            //     let url="/fetch-all-cities";
            //     $http.get(url).then(Response,Error);
            //     function Response(response)
            //     {
            //         alert("Hello");
            //     }
            //     function Error(err)
            //     {
            //         alert(err);
            //     }
            // }
            $scope.FindInf = function (IFfields) {
                alert("HELLO");
                $scope.jarraybyfunc;
                let url = "/do-find?fields=" + IFfields;
                $http.get(url).then(alliswell, notwell);
                function alliswell(response) {
                    $scope.jarraybyfunc = response.data;
                }
                function notwell(err) {
                    alert(err);
                }
            }

            $scope.showinfo=function(index)
            {
                // alert(index);
                $scope.fulldetailObj=$scope.jarraybyfunc[index];
            }
        })
    </script>
</head>

<body ng-app="MyModule" ng-controller="MyController" style="padding: 20px;">
    <label for="IFfields" style="float: left; margin-right: 5px;">Fields</label>
    <select class="form-select" ng-model="selectedfield" name="IFfields" id="IFfields" ng-init="fillAllCiities();" style="width: 200px;">
        <option selected>Select</option>
        <option value="fashion">Fashion</option>
        <option value="health">Health and wellness</option>
        <option value="beauty">Beauty</option>
        <option value="lifestyle">Lifestyle</option>
        <option value="food">Food</option>
        <option value="pet">Pet</option>
        <option value="sports">Sports and Fitness</option>
        <option value="travel">Travel</option>
        <option value="parenting">Parenting</option>
        <option value="gaming">Gaming</option>
        <option value="technology">Technology</option>
        <option value="entertainment">Entertainment</option>
    </select>
    <br>
    <input type="button" name="btnFind" id="btnFind" value="Fetch" ng-click="FindInf(selectedfield);">
    <div>
        <div class="row" >
            <div class="col-3" ng-repeat="obj in jarraybyfunc">
                <div class="card" style="width: 15rem;">
                    <img src="/uploads/{{obj.picpath}}" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">Name: {{obj.iname}}</h5>
                        <h5 class="card-title">Gender: {{obj.gender}}</h5>
                        <h5 class="card-title">Instagram: {{obj.insta}}</h5>
                        <a class="btn btn-primary" ng-click="showinfo($index)" data-bs-toggle="modal" data-bs-target="#profileModal">More Info</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title">Influencer Details</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Modal body text goes here.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div> -->

      <div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Login</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="">
                        <center>
                            <img src="/uploads/{{fulldetailObj.picpath}}" width="100px" height="100px" alt="">
                        </center>
                        Name: {{fulldetailObj.iname}};
                    </div>
                    </form>
            </div>
        </div>
    </div>
</body>

</html>